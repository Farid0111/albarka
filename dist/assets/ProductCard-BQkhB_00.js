import{j as e,a as s}from"./index-BLVL_dHp.js";import{r,L as t}from"./vendor-CWxX1f16.js";import{g as i}from"./price-zQCLA0EB.js";function n({src:s,alt:t="",className:i="",width:n=null,height:c=null,srcSet:o=null,sizes:a=null}){const[l,d]=r.useState(null),[u,p]=r.useState(!0),m=r.useRef(null);r.useEffect(()=>{if(!m.current)return;const e=new IntersectionObserver(r=>{r.forEach(r=>{r.isIntersecting&&(d(s),m.current&&e.unobserve(m.current))})},{rootMargin:"50px"});return e.observe(m.current),()=>{m.current&&e.unobserve(m.current)}},[s]);const h=n&&c?c/n*100+"%":"auto";return e.jsx("div",{style:{position:"relative",width:"100%"},children:e.jsx("div",{style:{paddingBottom:h,backgroundColor:"#f0f0f0",overflow:"hidden",borderRadius:"inherit"},children:e.jsx("img",{ref:m,src:l,srcSet:o,sizes:a,alt:t,className:i,loading:"lazy",width:n||void 0,height:c||void 0,decoding:"async",onLoad:()=>p(!1),style:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",top:0,left:0,opacity:u?.5:1,transition:"opacity 0.3s ease-in-out"}})})})}const c=r.memo(function({product:r}){const{addToCart:c}=s(),{id:o,name:a=r?.nom??"Sans nom",description:l=r?.desc??"",price:d=0,emoji:u="ðŸ“¦",image:p=r?.imageUrl??r?.image??r?.photo}=r??{},m=i(d);return e.jsxs("article",{className:"product-card",children:[e.jsxs(t,{to:`/produits/${o}`,className:"product-card-link",children:[e.jsx("div",{className:"product-image",children:p?e.jsx(n,{src:p,alt:a}):u}),e.jsx("h3",{className:"product-card-name",children:a}),l&&e.jsx("p",{className:"product-card-description",children:l}),e.jsxs("p",{className:"product-price",children:[e.jsxs("span",{className:"price-strike",children:[m," FCFA"]}),e.jsxs("span",{className:"price-current",children:[d," FCFA"]})]})]}),e.jsx("button",{type:"button",className:"btn btn-small",onClick:()=>c(o),children:"Ajouter au panier"})]})});export{c as P};
