const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-DAISEjUT.js","assets/vendor-_hJ_S9AP.js","assets/ProductCard-OAcylr4V.js","assets/price-zQCLA0EB.js","assets/firebase-DNEHJiPN.js","assets/Products-8Hy_1p8n.js","assets/ProductDetail-UlTm8fHq.js","assets/Cart-C2w4EJLY.js","assets/Checkout-BoMHIUqN.js"])))=>i.map(i=>d[i]);
import{r as e,a as t,L as r,R as n,b as o,c as s,B as i}from"./vendor-_hJ_S9AP.js";import{f as a}from"./firebase-DNEHJiPN.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var c={exports:{}},l={},d=e,u=Symbol.for("react.element"),m=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,f=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var n,o={},s=null,i=null;for(n in void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(i=t.ref),t)p.call(t,n)&&!h.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:u,type:e,key:s,ref:i,props:o,_owner:f.current}}l.Fragment=m,l.jsx=x,l.jsxs=x,c.exports=l;var y=c.exports,g={},j=t;g.createRoot=j.createRoot,g.hydrateRoot=j.hydrateRoot;const v=a.initializeApp({apiKey:"AIzaSyCesJawM_d5I8lF9984c42L1_8DnLas8I4",authDomain:"matrixshop-5600a.firebaseapp.com",projectId:"matrixshop-5600a",storageBucket:"matrixshop-5600a.firebasestorage.app",messagingSenderId:"390166565853",appId:"1:390166565853:web:f272f05b332b251a3c5c34",measurementId:"G-7FXY7JF6SG"});"undefined"!=typeof window&&a.analytics(v);const _=a.firestore(),E="products";function b(e){const t=e.data();return{id:e.id,...t,name:t.name??t.nom??"Sans nom",description:t.description??t.desc??"",price:t.price??0,emoji:t.emoji??"ðŸ“¦",image:t.image??t.imageUrl??t.photo??null,longDescription:t.longDescription??null}}async function S(e){return(await _.collection("orders").add({...e,createdAt:new Date})).id}async function w(e){if(!e)return[];const t=await _.collection(E).doc(String(e)).collection("reviews").get(),r=[];return t.docs.forEach(e=>{const t=e.data(),n=(null==t?void 0:t.url)??(null==t?void 0:t.imageUrl)??(null==t?void 0:t.image)??(null==t?void 0:t.src);n&&"string"==typeof n&&r.push(n)}),r}const C=e.createContext(null);function P({children:t}){const[r,n]=e.useState([]),[o,s]=e.useState(!0),[i,a]=e.useState(null),c=e.useCallback(()=>{s(!0),a(null),async function(){return(await _.collection(E).get({source:"server"})).docs.map(b)}().then(e=>n(e||[])).catch(e=>{a((null==e?void 0:e.message)||"Erreur chargement des produits"),n([])}).finally(()=>s(!1))},[]);e.useEffect(()=>{c()},[c]),e.useEffect(()=>{const e=()=>c();if("undefined"!=typeof document)return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[c]);const l=e.useCallback(e=>{const t=String(e);return r.find(e=>String(e.id)===t)||null},[r]),d=e.useMemo(()=>({products:r,loading:o,error:i,getProductById:l,refetch:c}),[r,o,i,l,c]);return y.jsx(C.Provider,{value:d,children:t})}function I(){const t=e.useContext(C);if(!t)throw new Error("useProducts must be used within ProductsProvider");return t}const O="albarka_cart",k=e.createContext(null);function L({children:t}){const[r,n]=e.useState(()=>{try{const e=localStorage.getItem(O);return e?JSON.parse(e):{}}catch{return{}}});e.useEffect(()=>{localStorage.setItem(O,JSON.stringify(r))},[r]);const o=e=>{n(t=>{const r={...t};return delete r[e],r})},s=Object.values(r).reduce((e,t)=>e+t,0);return y.jsx(k.Provider,{value:{cart:r,addToCart:(e,t=1)=>{n(r=>({...r,[e]:(r[e]||0)+Math.max(1,Number(t)||1)}))},setCartQuantity:(e,t)=>{const r=Math.max(0,Number(t)||0);r<1?o(e):n(t=>({...t,[e]:r}))},removeFromCart:o,clearCart:()=>n({}),cartCount:s},children:t})}function N(){const t=e.useContext(k);if(!t)throw new Error("useCart must be used within CartProvider");return t}const R={},A=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in R)return;R[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script"),o.crossOrigin="",o.href=e,r&&o.setAttribute("nonce",r),document.head.appendChild(o),t?new Promise((t,r)=>{o.addEventListener("load",t),o.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})};function D(){const{cartCount:e}=N();return y.jsxs("header",{className:"header",children:[y.jsx(r,{to:"/",className:"logo",children:y.jsx("img",{src:"/logo-albarka.png",alt:"Albarka - La SantÃ© VÃ©gÃ©tale",className:"logo-img"})}),y.jsxs("nav",{className:"nav",children:[y.jsx(r,{to:"/",children:"Accueil"}),y.jsx(r,{to:"/produits",children:"ThÃ©s"}),y.jsxs(r,{to:"/panier",className:"cart-link",children:["Panier (",e,")"]})]})]})}function T(){return y.jsx("footer",{className:"footer",children:y.jsx("p",{children:"Â© 2025 ThÃ©s SantÃ© â€” ThÃ©s et infusions bien-Ãªtre"})})}function z(){return y.jsx("main",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{display:"inline-block",width:"40px",height:"40px",border:"3px solid #f0f0f0",borderTop:"3px solid #8b6f47",borderRadius:"50%",animation:"spin 1s linear infinite"}}),y.jsx("p",{style:{marginTop:"1rem",color:"#666"},children:"Chargementâ€¦"}),y.jsx("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "})]})})}class F extends e.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){}render(){return this.state.hasError?y.jsx("main",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("h2",{children:"Oups ! Une erreur est survenue"}),y.jsx("p",{children:"Veuillez rafraÃ®chir la page ou rÃ©essayer plus tard."})]})}):this.props.children}}const V=e.lazy(()=>A(()=>import("./Home-DAISEjUT.js"),__vite__mapDeps([0,1,2,3,4]))),B=e.lazy(()=>A(()=>import("./Products-8Hy_1p8n.js"),__vite__mapDeps([5,1,2,3,4]))),M=e.lazy(()=>A(()=>import("./ProductDetail-UlTm8fHq.js"),__vite__mapDeps([6,1,3,4]))),U=e.lazy(()=>A(()=>import("./Cart-C2w4EJLY.js"),__vite__mapDeps([7,1,3,4]))),$=e.lazy(()=>A(()=>import("./Checkout-BoMHIUqN.js"),__vite__mapDeps([8,1,3,4])));function H(){return y.jsx(F,{children:y.jsxs("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[y.jsx(D,{}),y.jsx(e.Suspense,{fallback:y.jsx(z,{}),children:y.jsxs(n,{children:[y.jsx(o,{path:"/",element:y.jsx(V,{})}),y.jsx(o,{path:"/produits",element:y.jsx(B,{})}),y.jsx(o,{path:"/produits/:id",element:y.jsx(M,{})}),y.jsx(o,{path:"/panier",element:y.jsx(U,{})}),y.jsx(o,{path:"/commander",element:y.jsx($,{})})]})}),y.jsx(T,{})]})})}g.createRoot(document.getElementById("root")).render(y.jsx(s.StrictMode,{children:y.jsx(i,{children:y.jsx(P,{children:y.jsx(L,{children:y.jsx(H,{})})})})}));export{N as a,S as b,w as g,y as j,I as u};
